{# product/templates/product_table_htmx.html #}
{% extends "base.html" %}

{% load render_table from django_tables2 %}
{% load i18n %}

{% block main %}
    <h1>Users table</h1>

    <!-- Debug: display count of users if available -->
    {% if table.page.object_list %}
        <p>Found {{ table.page.object_list|length }} users.</p>
    {% else %}
        <p>No users found.</p>
    {% endif %}

    {# Updated search form using correct URL name #}
    <form hx-get="{% url 'manage-users' %}" 
          hx-target="div.table-container" 
          hx-swap="outerHTML" 
          hx-indicator=".progress" 
          class="form-inline mb-3">
        <input type="text" name="query" placeholder="Search users" class="form-control mr-2">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <div class="progress">
        <div class="indeterminate"></div>
    </div>

    <div class="table-container">
        {% render_table table %}
    </div>
{% endblock %}